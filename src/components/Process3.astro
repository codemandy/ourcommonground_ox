---
import Section from "./Section-landing.astro"
---

<Section id="process3" color="white">
  <div x-data="{ 
        text: '', 
        fullText: 'Resultatet var en platsbunden föreställning om vikten av att kontrollera sin egen historia. De avslutande föreställningarna på Malmös Ungdomens Hus, tillsammans med denna digitala anpassning, är menade att stå som en slags levande arkiv och fira, men aldrig fullständigt förmedla rikedomen i sina källor.', 
        charIndex: 0, 
        typeSpeed: 45,
        intervalId: null,
        observer: null
      }" 
      x-init="observer = new IntersectionObserver((entries) => {
                  entries.forEach(entry => {
                    if(entry.isIntersecting) {
                      intervalId = setInterval(function(){ 
                        if($data.charIndex < $data.fullText.length) {
                          $data.text += $data.fullText.charAt($data.charIndex);
                          $data.charIndex++;
                        }
                        document.getElementById('animated-text4').innerHTML = $data.text;
                      }, $data.typeSpeed);
                    } else {
                      clearInterval(intervalId);
                      $data.text = '';
                      $data.charIndex = 0;
                    }
                  });
                }, { threshold: 1 });
                observer.observe($el);"
      id="text-container"
      class="text-container text-left"
      slot="animated-text4">
    <h1 id="animated-text4" class="main-title"></h1>
  </div>
</Section>


<style>
  .main-title {
    font-size: 1rem;
    color: rgb(255, 255, 255);
    z-index: 1;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -75%);
  }

  #animated-text4 {
  width: 200px;  /* Default width for mobile devices */
}

@media (min-width: 768px) {
  #animated-text4 {
    width: 500px;  /* Width for screens larger than 768px */
  }
}
</style>
